#!/bin/bash

#fun for new keys
gen_ssh() {
    ssh-keygen -t rsa 
    ssh-copy-id -i ~/.ssh/$HOSTNAME_key.pub $1@$2
}

#test ssh connection, if ask password than need re-setup ssh
test_ssh() {
    ssh $1@$2
    grep -v "PertmitRootLogin" /etc/ssh/sshd_config > temp; echo "PermitRootLogin no" >> temp; mv temp /etc/ssh/sshd_config
    grep -v ""
    systemctl restart sshd
    service sshd restart
    /etc/init.d/ssh restart
}

gen_ssh $1 $2
test_ssh $1 $2
